var PubNub = require('pubnub');

var pubnub = new PubNub({
	subscribeKey: "sub-c-7772d0c0-4a7b-11ea-80a4-42690e175160",
	publishKey: "pub-c-85b6e53e-c338-402d-bf03-770625f0fd04",
	secretKey: "sec-c-OGUwODEwZjYtM2NkNC00YjQwLTliZjItZTI0MjY1MjUxMTYyy",
	uuid: "thisIsTheDemoMobileTaking",
	ssl: true
})

pubnub.subscribe({
	channels: ['demoChannel'],
});

var i = 0

const publish = (location) => {
	pubnub.publish(
		{
			message: {
				location: location
			},
			channel: 'demoChannel',
			sendByPost: false, // true to send via post
			storeInHistory: false, //override default storage options
			meta: {
				"cool": "meta"
			}   // publish extra meta with the request
		},
		function (status, response) {
			if (status.error) {
				// handle error
				console.log(status)
			} else {
				console.log("message Published w/ timetoken", response.timetoken)
			}
		}
	);
	i++;
	if (i === coordinates.length) {
		clearInterval(interval);
		publish(null)
	}
}

var coordinates = [[72.59283, 23.00238], [72.59217, 23.00222], [72.5915, 23.00207], [72.59063, 23.00187], [72.58995, 23.00172], [72.58969, 23.00166], [72.58945, 23.00157], [72.58875, 23.00151], [72.58825, 23.00151], [72.58786, 23.00149], [72.58757, 23.00146], [72.58732, 23.00142], [72.58708, 23.00136], [72.58707, 23.00136], [72.58707, 23.00136], [72.58669, 23.00127], [72.58628, 23.00118], [72.58567, 23.00105], [72.58511, 23.00091], [72.58477, 23.00079], [72.58445, 23.00064], [72.58414, 23.00048], [72.58358, 23.00017], [72.58291, 22.9998], [72.58291, 22.99979], [72.5829, 22.99979], [72.58257, 22.99959], [72.58224, 22.99939], [72.58145, 22.99883], [72.58067, 22.99834], [72.58008, 22.998], [72.57952, 22.99766], [72.57913, 22.99741], [72.57895, 22.99727], [72.57887, 22.99717], [72.57877, 22.9971], [72.57866, 22.99703], [72.5786, 22.99704], [72.57853, 22.99702], [72.57832, 22.99689], [72.57808, 22.99674], [72.5774, 22.99646], [72.5774, 22.99646], [72.57738, 22.99645], [72.57708, 22.99634], [72.57675, 22.99626], [72.57609, 22.99616], [72.57556, 22.99604], [72.5752, 22.99601], [72.57477, 22.996], [72.57436, 22.99599], [72.5736, 22.99598], [72.57284, 22.99598], [72.57252, 22.99598], [72.57222, 22.99594], [72.57191, 22.99587], [72.57107, 22.99568], [72.57019, 22.99549], [72.57019, 22.99549], [72.57018, 22.99549], [72.5695, 22.99531], [72.56908, 22.99525], [72.56842, 22.99521], [72.56776, 22.99515], [72.56762, 22.99513], [72.56744, 22.9951], [72.56726, 22.9951], [72.56636, 22.99526], [72.5657, 22.99539], [72.56527, 22.99553], [72.56512, 22.9956], [72.56402, 22.99633], [72.5628, 22.99714], [72.56243, 22.99741], [72.5618, 22.99794], [72.56153, 22.99814], [72.56124, 22.99833], [72.56102, 22.99845], [72.5604, 22.99869], [72.56009, 22.99881], [72.55982, 22.99894], [72.55905, 22.99924], [72.55862, 22.99942], [72.55827, 22.99961], [72.55803, 22.99975], [72.55803, 22.99975], [72.55756, 23.00006], [72.55719, 23.00038], [72.55687, 23.00067], [72.55652, 23.00104], [72.55615, 23.00141], [72.55585, 23.00173], [72.55553, 23.00204], [72.55502, 23.00256], [72.55449, 23.00308], [72.55416, 23.00339], [72.55384, 23.00369], [72.55384, 23.00369], [72.55385, 23.00369], [72.55358, 23.00394], [72.55334, 23.00418], [72.55326, 23.00426], [72.55314, 23.0042], [72.55305, 23.0042], [72.55296, 23.00423], [72.55289, 23.00428], [72.55286, 23.00435], [72.55285, 23.00441], [72.55288, 23.0045], [72.55286, 23.00456], [72.55259, 23.00485], [72.55206, 23.00536], [72.55148, 23.00598], [72.55103, 23.00644], [72.55057, 23.00688], [72.54926, 23.00817], [72.54921, 23.00822]]


var interval = setInterval(() => publish(coordinates[i]), 500)




